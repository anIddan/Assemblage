/*! PHOTO GRID v1 | (c) 2015 Iddan Aharonson | MIT License | http://github.com/anIddan */
function Grid(i,t,e,n){this.images=i,this.index=[],this.render=0
for(var s=0;s<Math.ceil(i.length/t);s++)this.index.push([])
var h=i.length
n.style.position="relative",n.style.paddingBottom=e,this.images.forEach(function(i,e){for(var n=new Image,s=0,o=e;o>=t;)o-=t,s++
n.row=s,n.index=o,n.addEventListener("load",function(){n.proportion=n.height/n.width,this.images[e]=n,this.index[n.row][n.index]=n,h--,h||this.size()}.bind(this)),n.src=i}.bind(this)),this.size=function(){var i=n.clientWidth,s=e*(1+1/t)
this.images.forEach(function(h,o){h.width=i/t-s,h.height=i/t*h.proportion-s
for(var d=h.row,r=e;d>0;)r+=i/t*this.index[d-1][h.index].proportion,d--
h.style.top=r,h.style.left=(h.width+e)*h.index+e,h.style.position="absolute",this.render||n.appendChild(h),this.images[o]=h,this.index[h.row][h.index]=h}.bind(this))}.bind(this),window.addEventListener("resize",this.size)}